<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
		<title>
			Movement register
		</title>
	</head>
	<body style="text-align: center;">
		<div class="container mt-5">
			<h2>Movement Register</h2>
	    	<br />
	    	
	    	<div class="form-group row">
				<label for="month" class="col-sm-2 col-form-label">Month:</label>
				<div class="col-sm-8">
					<select name="month" id="month" class="form-control">
						<option th:text="${previousMonth}">Previous Month</option>
						<option th:text="${currentMonth}" selected>Current Month</option>
						<option th:text="${nextMonth}">Next Month</option>
					</select>
				</div>
			</div>
	    	
	    	<br />
	    	
	    	<div id="currentMonth">
		    	<p style="text-align: center;" th:if="${#lists.isEmpty(currentMonthLeaves)}">No Leave Records</p>
				<table style="margin-left:auto; margin-right: auto; width:100%" class="table-hover" th:if="${not #lists.isEmpty(currentMonthLeaves)}">
					<thead>
						<tr>
							<th>No.</th>
							<th>Name:</th>
							<th>Start Date:</th>
							<th>End Date:</th>
							<th>Leave Type:</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="leave, iterStat:${currentMonthLeaves}" style="text-align: center;">
							<td th:text="${iterStat.count}"></td>
							<td th:text="${leave.employee.name}"></td>
							<td th:text="${#temporals.format(leave.startDate, 'dd-MM-yyyy')}"></td>
							<td th:text="${#temporals.format(leave.endDate, 'dd-MM-yyyy')}"></td>
							<td th:text="${leave.type}"></td>
						</tr>
					</tbody>
				</table>
			</div>
			
			<div id="previousMonth">
		    	<p style="text-align: center;" th:if="${#lists.isEmpty(previousMonthLeaves)}">No Leave Records</p>
				<table style="margin-left:auto; margin-right: auto; width:100%" class="table-hover" th:if="${not #lists.isEmpty(previousMonthLeaves)}">
					<thead>
						<tr>
							<th>No.</th>
							<th>Name:</th>
							<th>Start Date:</th>
							<th>End Date:</th>
							<th>Leave Type:</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="leave, iterStat:${previousMonthLeaves}" style="text-align: center;">
							<td th:text="${iterStat.count}"></td>
							<td th:text="${leave.employee.name}"></td>
							<td th:text="${#temporals.format(leave.startDate, 'dd-MM-yyyy')}"></td>
							<td th:text="${#temporals.format(leave.endDate, 'dd-MM-yyyy')}"></td>
							<td th:text="${leave.type}"></td>
						</tr>
					</tbody>
				</table>
			</div>
			
			<div id="nextMonth">
		    	<p style="text-align: center;" th:if="${#lists.isEmpty(nextMonthLeaves)}">No Leave Records</p>
				<table style="margin-left:auto; margin-right: auto; width:100%" class="table-hover" th:if="${not #lists.isEmpty(nextMonthLeaves)}">
					<thead>
						<tr>
							<th>No.</th>
							<th>Name:</th>
							<th>Start Date:</th>
							<th>End Date:</th>
							<th>Leave Type:</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="leave, iterStat:${nextMonthLeaves}" style="text-align: center;">
							<td th:text="${iterStat.count}"></td>
							<td th:text="${leave.employee.name}"></td>
							<td th:text="${#temporals.format(leave.startDate, 'dd-MM-yyyy')}"></td>
							<td th:text="${#temporals.format(leave.endDate, 'dd-MM-yyyy')}"></td>
							<td th:text="${leave.type}"></td>
						</tr>
					</tbody>
				</table>
			</div>
			
		</div>
		<br />
		<div>
			<table style="width:50%; margin-left: auto; margin-right: auto; border: white;">
				<tr>
					<td style="text-align: center; font-weight: bold;"><a href="/home" >Back To Home</a></td>
				</tr>
			</table>
		</div>
		
		<script th:inline="javascript">
			const monthDropDown = document.getElementById("month");
			const currentMonthDiv = document.getElementById("currentMonth");
			const previousMonthDiv = document.getElementById("nextMonth");
			const nextMonthDiv = document.getElementById("previousMonth");
			
			document.addEventListener('DOMContentLoaded', function() {
					previousMonthDiv.style.display = 'none';
					nextMonthDiv.style.display = 'none';
				})	
			
			monthDropDown.addEventListener("change", function(){
				if (monthDropDown.value === /*[[${currentMonth}]]*/ ''){
					currentMonthDiv.style.display = 'block';
					previousMonthDiv.style.display = 'none';
					nextMonthDiv.style.display = 'none';
				}
				else if (monthDropDown.value === /*[[${previousMonth}]]*/ ''){
					currentMonthDiv.style.display = 'none';
					previousMonthDiv.style.display = 'block';
					nextMonthDiv.style.display = 'none';
				}
				else if (monthDropDown.value === /*[[${nextMonth}]]*/ ''){
					currentMonthDiv.style.display = 'none';
					previousMonthDiv.style.display = 'none';
					nextMonthDiv.style.display = 'block';
				}
			})
		</script>
		
	</body>
</html>